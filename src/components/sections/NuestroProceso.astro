---
// Componente: Línea de tiempo del proceso arquitectónico
---

<section class="proceso section-bg-gray" id="proceso" aria-label="Nuestro Proceso">
  <div class="container">
    <div class="section-header">
      <span class="section-subtitle">Nuestro Proceso</span>
      <h2 class="section-title">¿Cómo trabajamos?</h2>
      <p class="section-description">
        Tu proyecto, paso a paso. Un proceso transparente y profesional que garantiza resultados
        excepcionales.
      </p>
    </div>

    <div class="timeline-wrapper">
      <div class="timeline-line"></div>
      
      <!-- Paso 1 -->
      <div class="timeline-item scroll-fade" data-step="1">
        <div class="timeline-marker">
          <div class="timeline-number">01</div>
          <div class="timeline-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"></path>
            </svg>
          </div>
        </div>
        <div class="timeline-content">
          <div class="timeline-card card-base card-hover">
            <div class="timeline-badge">Fase 1</div>
            <h3 class="timeline-title">Visión y Asesoramiento</h3>
            <p class="timeline-description">
              Nos reunimos contigo para comprender a fondo tus ideas, necesidades y presupuesto. Te
              guiamos con asesoría experta y te proponemos soluciones y materiales innovadores.
            </p>
            <ul class="timeline-features">
              <li>
                <span class="feature-icon">✓</span>
                <span>Consulta inicial personalizada</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Análisis detallado de necesidades</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Propuesta preliminar y presupuesto</span>
              </li>
            </ul>
            <div class="timeline-duration">Duración: 1-2 semanas</div>
          </div>
        </div>
      </div>

      <!-- Paso 2 -->
      <div class="timeline-item scroll-fade" data-step="2">
        <div class="timeline-marker">
          <div class="timeline-number">02</div>
          <div class="timeline-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect>
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
              <path d="M12 11h4"></path>
              <path d="M12 16h4"></path>
              <path d="M8 11h.01"></path>
              <path d="M8 16h.01"></path>
            </svg>
          </div>
        </div>
        <div class="timeline-content">
          <div class="timeline-card card-base card-hover">
            <div class="timeline-badge">Fase 2</div>
            <h3 class="timeline-title">Diseño y Planificación</h3>
            <p class="timeline-description">
              Desarrollamos el diseño arquitectónico completo y detallado de tu proyecto. Creamos planos
              técnicos, especificaciones de materiales y coordinamos todos los aspectos del diseño.
            </p>
            <ul class="timeline-features">
              <li>
                <span class="feature-icon">✓</span>
                <span>Planos arquitectónicos detallados</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Especificaciones técnicas completas</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Coordinación de permisos municipales</span>
              </li>
            </ul>
            <div class="timeline-duration">Duración: 3-4 semanas</div>
          </div>
        </div>
      </div>

      <!-- Paso 3 -->
      <div class="timeline-item scroll-fade" data-step="3">
        <div class="timeline-marker">
          <div class="timeline-number">03</div>
          <div class="timeline-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2v4"></path>
              <path d="M12 18v4"></path>
              <path d="M4.93 4.93l2.83 2.83"></path>
              <path d="M16.24 16.24l2.83 2.83"></path>
              <path d="M2 12h4"></path>
              <path d="M18 12h4"></path>
              <path d="M4.93 19.07l2.83-2.83"></path>
              <path d="M16.24 7.76l2.83-2.83"></path>
            </svg>
          </div>
        </div>
        <div class="timeline-content">
          <div class="timeline-card card-base card-hover">
            <div class="timeline-badge">Fase 3</div>
            <h3 class="timeline-title">Construcción y Supervisión</h3>
            <p class="timeline-description">
              Con el diseño aprobado, nuestro equipo da vida a tu proyecto. Supervisamos cada etapa
              con rigurosidad, asegurando calidad, seguridad y cumplimiento de los estándares más altos.
            </p>
            <ul class="timeline-features">
              <li>
                <span class="feature-icon">✓</span>
                <span>Supervisión técnica continua</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Control de calidad riguroso</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Cumplimiento estricto de plazos</span>
              </li>
            </ul>
            <div class="timeline-duration">Duración: Variable según proyecto</div>
          </div>
        </div>
      </div>

      <!-- Paso 4 -->
      <div class="timeline-item scroll-fade" data-step="4">
        <div class="timeline-marker">
          <div class="timeline-number">04</div>
          <div class="timeline-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 11l3 3L22 4"></path>
              <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
            </svg>
          </div>
        </div>
        <div class="timeline-content">
          <div class="timeline-card card-base card-hover">
            <div class="timeline-badge">Fase Final</div>
            <h3 class="timeline-title">Entrega y Satisfacción</h3>
            <p class="timeline-description">
              Te entregamos las llaves de tu nuevo hogar, cumpliendo todo lo acordado y asegurando
              tu completa satisfacción. ¡Disfruta de un espacio hecho a tu medida!
            </p>
            <ul class="timeline-features">
              <li>
                <span class="feature-icon">✓</span>
                <span>Entrega final con inspección completa</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Garantía de obra extendida</span>
              </li>
              <li>
                <span class="feature-icon">✓</span>
                <span>Soporte técnico post-entrega</span>
              </li>
            </ul>
            <div class="timeline-duration">Entrega inmediata</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Lazy init timeline (reveal items) cuando la sección entra al viewport
  import('../../lib/interactions/observer').then(o => {
    const proceso = document.getElementById('proceso');
    if (proceso) o.onceVisible(proceso, () => initTimelineReveal());
  });

  function initTimelineReveal() {
    const timelineItems = document.querySelectorAll('.timeline-item');
    const timelineLine = document.querySelector('.timeline-line') as HTMLElement;
    
    // Configurar la línea de progreso
    if (timelineLine) {
      timelineLine.style.setProperty('--progress', '0%');
    }

    // Revelar items con delay progresivo
    timelineItems.forEach((item, index) => {
      setTimeout(() => {
        item.classList.add('visible');
        
        // Animar la línea de progreso
        if (timelineLine) {
          const progress = ((index + 1) / timelineItems.length) * 100;
          timelineLine.style.setProperty('--progress', `${progress}%`);
        }
      }, index * 200);
    });
  }
</script>

<style>
  /* Estilos para la línea de tiempo */
  .proceso {
    padding: var(--spacing-2xl) 0;
  }

  .timeline-wrapper {
    position: relative;
    max-width: 800px;
    margin: 0 auto;
    padding: var(--spacing-2xl) 0;
  }

  /* Línea central de la timeline */
  .timeline-line {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--color-neutral-200);
    transform: translateX(-50%);
    z-index: 1;
    --progress: 0%;
  }

  .timeline-line::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--progress);
    background: linear-gradient(180deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    transition: height 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 2px;
  }

  /* Items de la timeline */
  .timeline-item {
    position: relative;
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-3xl);
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .timeline-item.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .timeline-item:nth-child(even) {
    flex-direction: row-reverse;
  }

  .timeline-item:nth-child(even) .timeline-content {
    padding-right: var(--spacing-2xl);
    padding-left: 0;
  }

  .timeline-item:nth-child(odd) .timeline-content {
    padding-left: var(--spacing-2xl);
    padding-right: 0;
  }

  /* Marcador central */
  .timeline-marker {
    position: relative;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .timeline-number {
    position: absolute;
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: 700;
    box-shadow: var(--shadow-xl);
    border: 6px solid white;
  }

  .timeline-icon {
    position: absolute;
    width: 40px;
    height: 40px;
    background: white;
    color: var(--color-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-md);
    z-index: 1;
  }

  /* Contenido de la timeline */
  .timeline-content {
    flex: 1;
    max-width: 400px;
  }

  .timeline-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-xl);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--color-neutral-200);
    position: relative;
    overflow: hidden;
  }

  .timeline-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-secondary) 100%);
  }

  .timeline-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    color: white;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--border-radius-full);
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: var(--spacing-md);
  }

  .timeline-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-neutral-900);
    margin-bottom: var(--spacing-md);
    line-height: 1.3;
  }

  .timeline-description {
    color: var(--color-neutral-700);
    line-height: 1.6;
    margin-bottom: var(--spacing-lg);
    text-align: justify;
  }

  .timeline-features {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--spacing-lg) 0;
  }

  .timeline-features li {
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-sm);
    color: var(--color-neutral-700);
    text-align: justify;
  }

  .feature-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: var(--color-success);
    color: white;
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 700;
    margin-right: var(--spacing-sm);
    flex-shrink: 0;
  }

  .timeline-duration {
    display: inline-block;
    background: var(--color-neutral-100);
    color: var(--color-neutral-600);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-md);
    font-size: 0.875rem;
    font-weight: 500;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .timeline-wrapper {
      padding: var(--spacing-xl) var(--spacing-md);
    }

    /* Ocultar la línea temporal en móvil */
    .timeline-line {
      display: none;
    }

    .timeline-item {
      flex-direction: column !important;
      align-items: center;
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .timeline-item:nth-child(even) .timeline-content,
    .timeline-item:nth-child(odd) .timeline-content {
      padding: 0;
      margin-top: var(--spacing-lg);
    }

    .timeline-marker {
      align-self: center;
      margin-bottom: var(--spacing-md);
    }

    .timeline-number {
      width: 80px;
      height: 80px;
      font-size: 1.5rem;
    }

    .timeline-icon {
      width: 40px;
      height: 40px;
    }

    .timeline-icon svg {
      width: 20px;
      height: 20px;
    }

    .timeline-content {
      max-width: none;
      width: 100%;
    }

    .timeline-card {
      text-align: justify;
    }

    .timeline-title {
      font-size: 1.25rem;
      text-align: center;
    }

    .timeline-badge {
      display: block;
      text-align: center;
      width: fit-content;
      margin: 0 auto var(--spacing-md) auto;
    }

    .timeline-duration {
      display: block;
      text-align: center;
      width: fit-content;
      margin: 0 auto;
    }
  }

  @media (max-width: 480px) {
    .timeline-wrapper {
      padding: var(--spacing-lg) var(--spacing-sm);
    }

    /* Mantener línea oculta en móviles pequeños */
    .timeline-line {
      display: none;
    }

    .timeline-item {
      flex-direction: column !important;
      align-items: center;
      text-align: center;
      margin-bottom: var(--spacing-xl);
    }

    .timeline-number {
      width: 70px;
      height: 70px;
      font-size: 1.25rem;
    }

    .timeline-icon {
      width: 35px;
      height: 35px;
    }

    .timeline-icon svg {
      width: 18px;
      height: 18px;
    }

    .timeline-card {
      padding: var(--spacing-lg);
      text-align: justify;
    }

    .timeline-title {
      font-size: 1.125rem;
      text-align: center;
    }

    .timeline-description {
      font-size: 0.9rem;
      text-align: justify;
    }

    .timeline-badge {
      display: block;
      text-align: center;
      width: fit-content;
      margin: 0 auto var(--spacing-md) auto;
    }

    .timeline-duration {
      display: block;
      text-align: center;
      width: fit-content;
      margin: 0 auto;
      font-size: 0.8rem;
    }

    .timeline-features li {
      text-align: left;
      justify-content: flex-start;
    }
  }

  /* Animación de entrada progresiva */
  .timeline-item:nth-child(1) {
    transition-delay: 0.1s;
  }

  .timeline-item:nth-child(2) {
    transition-delay: 0.2s;
  }

  .timeline-item:nth-child(3) {
    transition-delay: 0.3s;
  }

  .timeline-item:nth-child(4) {
    transition-delay: 0.4s;
  }

  /* Hover effects */
  .timeline-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
  }

  .timeline-number:hover {
    transform: scale(1.1);
  }
</style>
